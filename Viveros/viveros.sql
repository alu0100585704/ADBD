-- MySQL Script generated by MySQL Workbench
-- Thu Nov 12 20:56:21 2020
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION';

-- -----------------------------------------------------
-- Schema viverosDB
-- -----------------------------------------------------

-- -----------------------------------------------------
-- Schema viverosDB
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `viverosDB` DEFAULT CHARACTER SET utf8 ;
USE `viverosDB` ;

-- -----------------------------------------------------
-- Table `viverosDB`.`VIVERO`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `viverosDB`.`VIVERO` (
  `UBICACION` VARCHAR(45) NOT NULL,
  `NOMBRE` VARCHAR(45) NULL,
  `HORARIO APERTURA` TIME NULL,
  `HORARIO CIERRE` TIME NULL,
  PRIMARY KEY (`UBICACION`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `viverosDB`.`ZONAS`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `viverosDB`.`ZONAS` (
  `ID` INT NOT NULL,
  `UBICACIONVIVERO` VARCHAR(45) NOT NULL,
  `TIPO` VARCHAR(45) NULL,
  PRIMARY KEY (`ID`, `UBICACIONVIVERO`),
  INDEX `fk_ZONAS_UBICACIONVIVERO_idx` (`UBICACIONVIVERO` ASC),
  CONSTRAINT `fk_ZONAS_UBICACIONVIVERO`
    FOREIGN KEY (`UBICACIONVIVERO`)
    REFERENCES `viverosDB`.`VIVERO` (`UBICACION`)
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `viverosDB`.`PRODUCTO`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `viverosDB`.`PRODUCTO` (
  `CODIGO_BARRAS` INT NOT NULL,
  `PRECIO` INT NULL,
  `NOMBRE` VARCHAR(45) NULL,
  `TIPO` VARCHAR(45) NULL,
  `CADUCIDAD` DATE NULL,
  `STOCK` INT NOT NULL,
  PRIMARY KEY (`CODIGO_BARRAS`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `viverosDB`.`CLIENTES`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `viverosDB`.`CLIENTES` (
  `DNI` INT NOT NULL,
  `CODIGO FIDELIZACION` INT NULL,
  `GASTO MENSUAL` INT NULL,
  PRIMARY KEY (`DNI`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `viverosDB`.`EMPLEADO`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `viverosDB`.`EMPLEADO` (
  `DNI` INT NOT NULL,
  `NOMBRE` VARCHAR(45) NULL,
  `CSS` INT NULL,
  PRIMARY KEY (`DNI`),
  UNIQUE INDEX `CSS_UNIQUE` (`CSS` ASC))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `viverosDB`.`PEDIDO`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `viverosDB`.`PEDIDO` (
  `ID` INT NOT NULL,
  `FECHA` DATE NULL,
  `CLIENTE_REALIZA` INT NULL,
  `EMPLEADO_SUPERVISA` INT NULL,
  PRIMARY KEY (`ID`),
  INDEX `fk_PEDIDO_CLIENTE_REALIZA_idx` (`CLIENTE_REALIZA` ASC),
  INDEX `fk_PEDIDO_EMPLEADO_SUPERVISA_idx` (`EMPLEADO_SUPERVISA` ASC),
  CONSTRAINT `fk_PEDIDO_CLIENTE_REALIZA`
    FOREIGN KEY (`CLIENTE_REALIZA`)
    REFERENCES `viverosDB`.`CLIENTES` (`DNI`)
    ON DELETE RESTRICT
    ON UPDATE CASCADE,
  CONSTRAINT `fk_PEDIDO_EMPLEADO_SUPERVISA`
    FOREIGN KEY (`EMPLEADO_SUPERVISA`)
    REFERENCES `viverosDB`.`EMPLEADO` (`DNI`)
    ON DELETE RESTRICT
    ON UPDATE CASCADE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `viverosDB`.`ASIGNA`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `viverosDB`.`ASIGNA` (
  `ID_ZONA` INT NOT NULL,
  `ID_PRODUCTO` INT NOT NULL,
  `UBICACION_VIVERO` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`ID_ZONA`, `ID_PRODUCTO`, `UBICACION_VIVERO`),
  INDEX `fk_ASIGNA_UBICACION_VIVERO_idx` (`UBICACION_VIVERO` ASC, `ID_ZONA` ASC),
  CONSTRAINT `fk_ASIGNA_UBICACION_VIVERO`
    FOREIGN KEY (`UBICACION_VIVERO` , `ID_ZONA`)
    REFERENCES `viverosDB`.`ZONAS` (`UBICACIONVIVERO` , `ID`)
    ON DELETE RESTRICT
    ON UPDATE CASCADE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `viverosDB`.`CONSTA`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `viverosDB`.`CONSTA` (
  `CODIGO_BARRAS_PRODUCTO` INT NOT NULL,
  `ID_PEDIDO` INT NOT NULL,
  PRIMARY KEY (`CODIGO_BARRAS_PRODUCTO`, `ID_PEDIDO`),
  INDEX `fk_CONSTA_pedido_idx` (`ID_PEDIDO` ASC),
  CONSTRAINT `fk_CONSTA_producto`
    FOREIGN KEY (`CODIGO_BARRAS_PRODUCTO`)
    REFERENCES `viverosDB`.`PRODUCTO` (`CODIGO_BARRAS`)
    ON DELETE RESTRICT
    ON UPDATE CASCADE,
  CONSTRAINT `fk_CONSTA_pedido`
    FOREIGN KEY (`ID_PEDIDO`)
    REFERENCES `viverosDB`.`PEDIDO` (`ID`)
    ON DELETE RESTRICT
    ON UPDATE CASCADE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `viverosDB`.`TRABAJA`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `viverosDB`.`TRABAJA` (
  `ID_ZONA` INT NOT NULL,
  `DNI_EMPLEADO` INT NOT NULL,
  `UBICACION_VIVERO` VARCHAR(45) NOT NULL,
  `F.INICIO` DATE NOT NULL,
  `F.FIN` DATE NULL,
  PRIMARY KEY (`ID_ZONA`, `DNI_EMPLEADO`, `UBICACION_VIVERO`, `F.INICIO`),
  INDEX `fk_TRABAJA_ZONA_idx` (`ID_ZONA` ASC, `UBICACION_VIVERO` ASC),
  INDEX `fk_TRABAJA_EMPLEADO_idx` (`DNI_EMPLEADO` ASC),
  CONSTRAINT `fk_TRABAJA_ZONA`
    FOREIGN KEY (`ID_ZONA` , `UBICACION_VIVERO`)
    REFERENCES `viverosDB`.`ZONAS` (`ID` , `UBICACIONVIVERO`)
    ON DELETE RESTRICT
    ON UPDATE CASCADE,
  CONSTRAINT `fk_TRABAJA_EMPLEADO`
    FOREIGN KEY (`DNI_EMPLEADO`)
    REFERENCES `viverosDB`.`EMPLEADO` (`DNI`)
    ON DELETE RESTRICT
    ON UPDATE CASCADE)
ENGINE = InnoDB;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;

-- -----------------------------------------------------
-- Data for table `viverosDB`.`VIVERO`
-- -----------------------------------------------------
START TRANSACTION;
USE `viverosDB`;
INSERT INTO `viverosDB`.`VIVERO` (`UBICACION`, `NOMBRE`, `HORARIO APERTURA`, `HORARIO CIERRE`) VALUES ('Los Realejos', 'Plantas Bonitas', '9:00:00', '21:00:00');
INSERT INTO `viverosDB`.`VIVERO` (`UBICACION`, `NOMBRE`, `HORARIO APERTURA`, `HORARIO CIERRE`) VALUES ('Las Américas', 'Plantas Bonitas', '9:00:00', '21:00:00');
INSERT INTO `viverosDB`.`VIVERO` (`UBICACION`, `NOMBRE`, `HORARIO APERTURA`, `HORARIO CIERRE`) VALUES ('La Laguna', 'Plantas Bonitas', '9:00:00', '21:00:00');

COMMIT;


-- -----------------------------------------------------
-- Data for table `viverosDB`.`ZONAS`
-- -----------------------------------------------------
START TRANSACTION;
USE `viverosDB`;
INSERT INTO `viverosDB`.`ZONAS` (`ID`, `UBICACIONVIVERO`, `TIPO`) VALUES (1, 'La Laguna', 'Almacén');
INSERT INTO `viverosDB`.`ZONAS` (`ID`, `UBICACIONVIVERO`, `TIPO`) VALUES (2, 'La Laguna', 'Caja');
INSERT INTO `viverosDB`.`ZONAS` (`ID`, `UBICACIONVIVERO`, `TIPO`) VALUES (1, 'Los Realejos', 'Caja');
INSERT INTO `viverosDB`.`ZONAS` (`ID`, `UBICACIONVIVERO`, `TIPO`) VALUES (2, 'Los Realejos', 'Patio');

COMMIT;


-- -----------------------------------------------------
-- Data for table `viverosDB`.`PRODUCTO`
-- -----------------------------------------------------
START TRANSACTION;
USE `viverosDB`;
INSERT INTO `viverosDB`.`PRODUCTO` (`CODIGO_BARRAS`, `PRECIO`, `NOMBRE`, `TIPO`, `CADUCIDAD`, `STOCK`) VALUES (111111, 123, 'Girasol', '1', NULL, 0);
INSERT INTO `viverosDB`.`PRODUCTO` (`CODIGO_BARRAS`, `PRECIO`, `NOMBRE`, `TIPO`, `CADUCIDAD`, `STOCK`) VALUES (222222, 342, 'Maceta', '2', NULL, 0);
INSERT INTO `viverosDB`.`PRODUCTO` (`CODIGO_BARRAS`, `PRECIO`, `NOMBRE`, `TIPO`, `CADUCIDAD`, `STOCK`) VALUES (333333, 4234, 'Abono', '1', NULL, 0);
INSERT INTO `viverosDB`.`PRODUCTO` (`CODIGO_BARRAS`, `PRECIO`, `NOMBRE`, `TIPO`, `CADUCIDAD`, `STOCK`) VALUES (444444, 23, 'Mangera', '3', NULL, 0);

COMMIT;


-- -----------------------------------------------------
-- Data for table `viverosDB`.`CLIENTES`
-- -----------------------------------------------------
START TRANSACTION;
USE `viverosDB`;
INSERT INTO `viverosDB`.`CLIENTES` (`DNI`, `CODIGO FIDELIZACION`, `GASTO MENSUAL`) VALUES (77777777, 77777777, NULL);
INSERT INTO `viverosDB`.`CLIENTES` (`DNI`, `CODIGO FIDELIZACION`, `GASTO MENSUAL`) VALUES (88888888, 88888888, NULL);

COMMIT;


-- -----------------------------------------------------
-- Data for table `viverosDB`.`EMPLEADO`
-- -----------------------------------------------------
START TRANSACTION;
USE `viverosDB`;
INSERT INTO `viverosDB`.`EMPLEADO` (`DNI`, `NOMBRE`, `CSS`) VALUES (78556096, 'Juan', 12321321);
INSERT INTO `viverosDB`.`EMPLEADO` (`DNI`, `NOMBRE`, `CSS`) VALUES (12345678, 'Pedro', 12321423);
INSERT INTO `viverosDB`.`EMPLEADO` (`DNI`, `NOMBRE`, `CSS`) VALUES (87654321, 'María', 54654645);

COMMIT;


-- -----------------------------------------------------
-- Data for table `viverosDB`.`PEDIDO`
-- -----------------------------------------------------
START TRANSACTION;
USE `viverosDB`;
INSERT INTO `viverosDB`.`PEDIDO` (`ID`, `FECHA`, `CLIENTE_REALIZA`, `EMPLEADO_SUPERVISA`) VALUES (0, '2020-06-12', 77777777, 78556096);
INSERT INTO `viverosDB`.`PEDIDO` (`ID`, `FECHA`, `CLIENTE_REALIZA`, `EMPLEADO_SUPERVISA`) VALUES (1, '2020-06-11', 88888888, 12345678);

COMMIT;


-- -----------------------------------------------------
-- Data for table `viverosDB`.`ASIGNA`
-- -----------------------------------------------------
START TRANSACTION;
USE `viverosDB`;
INSERT INTO `viverosDB`.`ASIGNA` (`ID_ZONA`, `ID_PRODUCTO`, `UBICACION_VIVERO`) VALUES (1, 111111, 'La Laguna');
INSERT INTO `viverosDB`.`ASIGNA` (`ID_ZONA`, `ID_PRODUCTO`, `UBICACION_VIVERO`) VALUES (1, 222222, 'La Laguna');
INSERT INTO `viverosDB`.`ASIGNA` (`ID_ZONA`, `ID_PRODUCTO`, `UBICACION_VIVERO`) VALUES (1, 11111, 'Los Realejos');

COMMIT;


-- -----------------------------------------------------
-- Data for table `viverosDB`.`CONSTA`
-- -----------------------------------------------------
START TRANSACTION;
USE `viverosDB`;
INSERT INTO `viverosDB`.`CONSTA` (`CODIGO_BARRAS_PRODUCTO`, `ID_PEDIDO`) VALUES (111111, 0);
INSERT INTO `viverosDB`.`CONSTA` (`CODIGO_BARRAS_PRODUCTO`, `ID_PEDIDO`) VALUES (222222, 0);
INSERT INTO `viverosDB`.`CONSTA` (`CODIGO_BARRAS_PRODUCTO`, `ID_PEDIDO`) VALUES (333333, 1);

COMMIT;


-- -----------------------------------------------------
-- Data for table `viverosDB`.`TRABAJA`
-- -----------------------------------------------------
START TRANSACTION;
USE `viverosDB`;
INSERT INTO `viverosDB`.`TRABAJA` (`ID_ZONA`, `DNI_EMPLEADO`, `UBICACION_VIVERO`, `F.INICIO`, `F.FIN`) VALUES (1, 78556096, 'Los Realejos', '2019-10-5', NULL);
INSERT INTO `viverosDB`.`TRABAJA` (`ID_ZONA`, `DNI_EMPLEADO`, `UBICACION_VIVERO`, `F.INICIO`, `F.FIN`) VALUES (2, 12345678, 'La Laguna', '2019-05-05', '2020-06-12');
INSERT INTO `viverosDB`.`TRABAJA` (`ID_ZONA`, `DNI_EMPLEADO`, `UBICACION_VIVERO`, `F.INICIO`, `F.FIN`) VALUES (2, 78556096, 'Los Realejos', '2019-10-5', NULL);
INSERT INTO `viverosDB`.`TRABAJA` (`ID_ZONA`, `DNI_EMPLEADO`, `UBICACION_VIVERO`, `F.INICIO`, `F.FIN`) VALUES (2, 12345678, 'La Laguna', '2020-07-01', NULL);

COMMIT;

